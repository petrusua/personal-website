<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes | Navendu Pottekkat</title><meta name=keywords content="api gateway,service mesh,kubernetes"><meta name=description content="A comprehensive comparison of API gateways, Kubernetes gateways, and service meshes with actionable insights."><meta name=author content="Navendu Pottekkat"><link rel=canonical href=https://navendu.me/posts/gateway-and-mesh/><script defer data-domain=navendu.me src=/misc/js/script.js data-api=/misc/api/event></script><script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script><script></script><link crossorigin=anonymous href=/assets/css/stylesheet.66e3e513d75c2ff303648a5691fa6787b3c8f1dc4b3307618713a4dc494f0696.css integrity="sha256-ZuPlE9dcL/MDZIpWkfpnh7PI8dxLMwdhhxOk3ElPBpY=" rel="preload stylesheet" as=style><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://navendu.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://navendu.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://navendu.me/favicon-32x32.png><link rel=apple-touch-icon href=https://navendu.me/apple-touch-icon.png><link rel=mask-icon href=https://navendu.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes"><meta property="og:description" content="A comprehensive comparison of API gateways, Kubernetes gateways, and service meshes with actionable insights."><meta property="og:type" content="article"><meta property="og:url" content="https://navendu.me/posts/gateway-and-mesh/"><meta property="og:image" content="https://navendu.me/images/gateway-and-mesh/mesh-banner.jpeg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-05T09:15:19+05:30"><meta property="article:modified_time" content="2023-05-31T11:44:21+05:30"><meta property="og:site_name" content="Navendu Pottekkat"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://navendu.me/images/gateway-and-mesh/mesh-banner.jpeg"><meta name=twitter:title content="A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes"><meta name=twitter:description content="A comprehensive comparison of API gateways, Kubernetes gateways, and service meshes with actionable insights."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://navendu.me/posts/"},{"@type":"ListItem","position":2,"name":"A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes","item":"https://navendu.me/posts/gateway-and-mesh/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes","name":"A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes","description":"A comprehensive comparison of API gateways, Kubernetes gateways, and service meshes with actionable insights.","keywords":["api gateway","service mesh","kubernetes"],"articleBody":"Translations: Simplified Chinese | 简体中文.\nThere is still a lot of confusion about API gateways, Kubernetes gateways, and service meshes. A lot of this is because:\n People often mention these technologies with the same keywords, like canary deployments, rate limiting, and service discovery. All these technologies use reverse proxies. Some API gateways have their own Kubernetes gateways and service meshes and vice versa. There are a lot of articles/videos that compare the three technologies and conclude why one is better than the other.  In this article, I will try to explain these technologies and share how they fundamentally differ and cater to different use cases.\nAPI Gateways An API gateway sits between your client applications and your APIs. It accepts all client requests, forwards them to the required APIs, and returns the response to clients in a combined package.\nIt is basically a reverse proxy with a lot of capabilities.\n API gateway   On top of this, an API gateway can also have features like authentication, security, fine-grained traffic control, and monitoring, leaving the API developers to focus only on business needs.\nThere are many API gateway solutions available. Some of the popular free and open source solutions are:\n Apache APISIX: A high-performance, extensible, cloud native API gateway built on top of Nginx. Gloo Edge: An API gateway built on top of Envoy proxy. Kong: A pluggable API gateway also built on Nginx. Tyk: An API gateway written in Go supporting REST, GraphQL, TCP, and gRPC protocols.  Cloud platforms like GCP, AWS, and Azure also have their own proprietary API gateways.\nAPI gateways, Kubernetes gateways, and service meshes support canary deployments—gradually rolling out a new software version to a small subset of users before making it generally available.\nThe example below shows how to configure a canary deployment in Apache APISIX.\n Canary deployments with an API gateway   You can send a request to the APISIX Admin API with the following configuration:\ncurl http://127.0.0.1:9180/apisix/admin/routes/1 \\ -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -d ' { \"uri\":\"/*\", \"plugins\":{ \"traffic-split\":{ \"rules\":[ { \"weighted_upstreams\":[ { \"upstream\":{ \"name\":\"api-v1\", \"type\":\"roundrobin\", \"nodes\":{ \"api-v1:8080\":1 } }, \"weight\":95 }, { \"weight\":5 } ] } ] } }, \"upstream\":{ \"type\":\"roundrobin\", \"nodes\":{ \"api-v2:8080\":1 } } }' APISIX will now route 95% of the traffic to the api-v1 service and 5% to the api-v2 service.\nKubernetes Gateways Kubernetes gateways are just Kubernetes-native API gateways. i.e., you can manage these API gateways with the Kubernetes API, similar to a Kubernetes pod, service, or deployment.\nIn Kubernetes, your APIs are pods and services deployed in a cluster. You then use a Kubernetes gateway to direct external traffic to your cluster.\nKubernetes provides two APIs to achieve this, the Ingress API and the Gateway API.\n Kubernetes gateway   Kubernetes Ingress API The Ingress API was created to overcome the limitations of the default service types, NodePort and LoadBalancer, by introducing features like routing and SSL termination. It also standardized how you expose Kubernetes services to external traffic.\nIt has two components, the Ingress and the Ingress controller.\nThe Ingress Kubernetes native object defines a set of rules on how external traffic can access your services.\nThis example configuration shows routing traffic based on URI path with the Kubernetes Ingress object:\napiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: api-routes spec: ingressClassName: apisix rules: - http: paths: - backend: service: name: api-v1 port: number: 8080 path: /v1 pathType: Exact - backend: service: name: api-v2 port: number: 8080 path: /v2 pathType: Exact An Ingress controller implements these rules and routes traffic to your cluster using a reverse proxy.\nThere are over 20 Ingress controller implementations. APISIX has an Ingress controller that wraps around APISIX API gateway to work as Kubernetes Ingress.\n APISIX Ingress   The APISIX Ingress controller converts the Kubernetes Ingress object to APISIX configuration.\n APISIX Ingress controller translates configuration   APISIX then implements this configuration.\n Canary deployments with Kubernetes Ingress API   You can swap APISIX with any other Ingress controller, as the Ingress API is not tied to any specific implementation.\nThis vendor neutrality works well for simple configurations. But if you want to do complex routing like a canary deployment, you must rely on vendor-specific annotations.\nThe example below shows how to configure a canary deployment using Nginx Ingress. The custom annotations used here are specific to Nginx:\napiVersion: networking.k8s.io/v1 kind: Ingress metadata: annotations: nginx.ingress.kubernetes.io/canary: \"true\" nginx.ingress.kubernetes.io/canary-weight: \"5\" name: api-canary spec: rules: - http: paths: - backend: serviceName: api-v2 servicePort: 8080 path: / The above configuration will route 5% of the traffic to the api-v2 service.\nIn addition to annotations, Ingress controllers like APISIX have custom Kubernetes CRDs to overcome the limitations of the Ingress API.\nThe example below uses the APISIX CRD, ApisixRoute to configure a canary deployment:\napiVersion: apisix.apache.org/v2 kind: ApisixRoute metadata: name: api-canary spec: http: - name: route match: paths: - /* backends: - serviceName: api-v1 servicePort: 8080 weight: 95 - serviceName: api-v2 servicePort: 8080 weight: 5 These custom CRDs made it much easier to configure Ingress and leverage the full capabilities of the API gateway underneath but at the expense of portability.\nKubernetes Gateway API The Gateway API is a new Kubernetes object that aims to “fix” the Ingress API.\nIt takes inspiration from the custom CRDs developed by Ingress controllers to add HTTP header-based matching, weighted traffic splitting, and other features that require custom proprietary annotations with the Ingress API.\nThe example below shows configuring a canary deployment with the Kubernetes Gateway API:\napiVersion: gateway.networking.k8s.io/v1alpha2 kind: HTTPRoute metadata: name: api-canary spec: rules: - backendRefs: - name: api-v1 port: 8080 weight: 95 - name: api-v2 port: 8080 weight: 5 Any Ingress controller (that implements the Gateway API) can now implement this configuration.\nThe Gateway API also makes many improvements over the Ingress API, but it is still in alpha, and the Gateway API implementations are constantly breaking.\nService Meshes API gateways and Kubernetes gateways work across application boundaries solving edge problems while abstracting your APIs.\nService Meshes solve a different challenge.\nA service mesh is more concerned about inter-service communication (east-west traffic) than service-client communication (north-south traffic).\nTypically, this is achieved by deploying sidecar proxies with APIs/services.\n Service mesh   Here, the sidecar proxies handle the service-to-service communication instead of the developer having to code the networking logic to the services.\nThere are a lot of service meshes available. Some of the popular ones are:\n Istio: By far the most popular service mesh. It is built on top of Envoy proxy, which many service meshes use. Linkerd: A lightweight service mesh that uses linkerd2-proxy, written in Rust specifically for Linkerd. Consul Connect: A service mesh emphasizing security and observability. It can work with either a built-in proxy or Envoy.  New service mesh offerings like Cilium offer alternatives to sidecar-based service meshes by using networking capabilities directly from the kernel through eBPF.\n Sidecar-less service meshA typical service mesh requires 8 proxies for 8 services whereas eBPF-based service meshes like Cilium don’t. Adapted from Cilium Service Mesh – Everything You Need to Know\n  Service meshes also have basic ingress/egress gateways to handle north-south traffic to and from the services. Ingress gateways are the entry points of external traffic to a service mesh, and egress gateways allow services inside a mesh to access external services.\n Ingress and egress gateways with a service mesh   Apache APISIX also has a service mesh implementation called Amesh. It works with Istio’s control plane using the xDS protocol replacing the default Envoy proxy in the sidecar.\nA service mesh lets you configure canary deployments. For example, you can split the requests from one service between two versions of another service.\n Canary deployments with a service mesh   The example below shows configuring a canary deployment with Istio service mesh:\napiVersion: networking.istio.io/v1alpha3 kind: VirtualService metadata: name: api-virtual-service spec: hosts: - api http: - route: - destination: host: api subset: v1 weight: 80 - destination: host: api subset: v2 weight: 20 apiVersion: networking.istio.io/v1alpha3 kind: DestinationRule metadata: name: api-destination-rule spec: host: api subsets: - name: v1 labels: version: \"1.0\" - name: v2 labels: version: \"2.0\" These configurations are specific to Istio. To switch to a different service mesh, you must create a different but similarly vendor-dependant configuration.\nThe Service Mesh Interface (SMI) specification was created to solve this portability issue.\nThe SMI spec is a set of Kubernetes CRDs that a service mesh user can use to define applications without binding to service mesh implementations.\nA standardization attempt will only work if all the projects are on board. But this did not happen with the SMI spec, and only a few projects participated actively.\nMore recently, the Kubernetes SIG Network has been evolving the Gateway API to support service meshes.\nThe GAMMA (Gateway API for Mesh Management and Administration) initiative is a dedicated group with the Gateway API project with goals to “investigate, design, and track Gateway API resources, semantics, and other artifacts related to service mesh technology and use-cases.”\nGateway API is a natural next step to the Ingress API, but we must wait to see how it will work for service meshes. Istio has announced its intention to use the Gateway API as its default API for all traffic management and continues to drive the project forward.\nThe example below shows configuring a canary deployment in Istio with the Gateway API. The underlying idea is using parentRefs to attach to other services instead of the gateway:\napiVersion: gateway.networking.k8s.io/v1beta1 kind: HTTPRoute metadata: name: api-canary spec: parentRefs: - kind: Service name: api-a port: 8080 rules: - backendRefs: - name: api-b-v1 port: 8080 weight: 95 - name: api-b-v2 port: 8080 weight: 5 There are some concerns that the GAMMA project might become skewed to serve the needs of one particular project than the larger community, which will eventually lead to other projects using their own APIs, similar to the custom CRD scenario after the Kubernetes Ingress API.\nBut the Gateway API project has been the best attempt at standardizing traffic management in service meshes. The SMI project also joined the GAMMA initiative with a shared vision and will help advocate for consistent implementations of the Gateway API by service mesh projects.\nOther projects like Flagger and Argo Rollouts have also integrated with the Gateway API.\nWhat Should You Use? There is only one correct answer to this question; “it depends.”\nIf you are developing APIs and need authentication, security, routing, or metrics, you are better off using an API gateway than building this on your own in your APIs.\nIf you want to do something similar in a Kubernetes environment, you should use a Kubernetes gateway instead of trying to wrangle your API gateway to work on Kubernetes. Thankfully, a lot of API gateways also work with Kubernetes-native configurations.\nBut sometimes, the features offered by an API gateway + Ingress controller might be an overkill for a Kubernetes environment, and you might want to switch back to simple traffic management.\nService meshes, on the other hand, solve an entirely different set of problems. They also bring their own gateways to handle north-south traffic (usually enough) but also let you use your own gateways with more features.\nThe convergence of the API gateway and the service mesh through the Kubernetes Gateway API should make it easier for the application developer to focus on solving problems than worry about the underlying implementation.\nProjects like Apache APISIX use the same technology to build the API gateway and service mesh offerings and integrate well with these specifications, incentivizing vendor-neutral choices.\nIt is also likely that you will not need any of these. You may not even need microservices or a distributed architecture, but when you need them, gateways and meshes can make your lives a lot easier.\n","wordCount":"1931","inLanguage":"en","image":"https://navendu.me/images/gateway-and-mesh/mesh-banner.jpeg","datePublished":"2023-05-05T09:15:19+05:30","dateModified":"2023-05-31T11:44:21+05:30","author":{"@type":"Person","name":"Navendu Pottekkat"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://navendu.me/posts/gateway-and-mesh/"},"publisher":{"@type":"Person","name":"Navendu Pottekkat","logo":{"@type":"ImageObject","url":"https://navendu.me/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://navendu.me/ accesskey=h title="Navendu Pottekkat (Alt + H)">Navendu Pottekkat</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://navendu.me/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://navendu.me/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://navendu.me/dailies/ title="Daily Logs"><span>Daily Logs</span></a></li><li><a href=https://navendu.me/about/ title=About><span>About</span></a></li><li><a href=https://navendu.me/subscribe/ title=Subscribe><span>Subscribe</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://navendu.me/>Home</a>&nbsp;»&nbsp;<a href=https://navendu.me/posts/>Posts</a></div><h1 class=post-title>A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes</h1><div class=post-meta><span title="2023-05-05 09:15:19 +0530 +0530">May 5, 2023</span>&nbsp;·&nbsp;10 min&nbsp;|&nbsp;<a href=https://github.com/pottekkat/personal-website/blob/hugo/content/posts/gateway-and-mesh.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy src=https://navendu.me/images/gateway-and-mesh/mesh-banner.jpeg alt="A photo of a mesh that is likely the weaving in a wooden chair."><p>Photo by <a href=https://www.pexels.com/photo/close-up-photo-of-natural-rattan-hexagonal-woven-material-6594391/>Anna Tarazevich</a></p></figure><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on twitter" href="https://twitter.com/intent/tweet/?text=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes&url=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f&hashtags=apigateway%2cservicemesh%2ckubernetes"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f&title=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes&summary=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes&source=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f&title=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on whatsapp" href="https://api.whatsapp.com/send?text=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes%20-%20https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on telegram" href="https://telegram.me/share/url?text=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes&url=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div><div class=post-content><p><strong>Translations</strong>: <a href="https://lib.jimmysong.io/blog/gateway-and-mesh/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Simplified Chinese | 简体中文</a>.</p><p>There is still a lot of confusion about API gateways, Kubernetes gateways, and service meshes. A lot of this is because:</p><ol><li>People often mention these technologies with the same keywords, like canary deployments, rate limiting, and service discovery.</li><li>All these technologies use reverse proxies.</li><li>Some API gateways have their own Kubernetes gateways and service meshes and vice versa.</li><li>There are a lot of articles/videos that compare the three technologies and conclude why one is better than the other.</li></ol><p>In this article, I will try to explain these technologies and share how they fundamentally differ and cater to different use cases.</p><h2 id=api-gateways>API Gateways<a hidden class=anchor aria-hidden=true href=#api-gateways>#</a></h2><p>An API gateway sits between your client applications and your APIs. It accepts all client requests, forwards them to the required APIs, and returns the response to clients in a combined package.</p><p>It is basically a reverse proxy with a lot of capabilities.</p><figure class=align-center><a href=/images/gateway-and-mesh/api-gateway.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/api-gateway.png#center alt="API gateway"></a><figcaption>API gateway</figcaption></figure><p>On top of this, an API gateway can also have features like authentication, security, fine-grained traffic control, and monitoring, leaving the API developers to focus only on business needs.</p><p>There are <a href="https://landscape.cncf.io/card-mode?category=api-gateway&grouping=category?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>many API gateway solutions available</a>. Some of the popular free and open source solutions are:</p><ul><li><strong><a href="https://github.com/apache/apisix?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Apache APISIX</a></strong>: A high-performance, extensible, cloud native API gateway built on top of Nginx.</li><li><strong><a href="https://github.com/solo-io/gloo?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Gloo Edge</a></strong>: An API gateway built on top of Envoy proxy.</li><li><strong><a href="https://github.com/kong/kong?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Kong</a></strong>: A pluggable API gateway also built on Nginx.</li><li><strong><a href="https://github.com/TykTechnologies/tyk?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Tyk</a></strong>: An API gateway written in Go supporting REST, GraphQL, TCP, and gRPC protocols.</li></ul><p>Cloud platforms like <a href="https://cloud.google.com/api-gateway?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>GCP</a>, <a href="https://aws.amazon.com/api-gateway/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>AWS</a>, and <a href="https://learn.microsoft.com/en-us/azure/api-management/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Azure</a> also have their own proprietary API gateways.</p><p>API gateways, Kubernetes gateways, and service meshes support canary deployments—gradually rolling out a new software version to a small subset of users before making it generally available.</p><p>The example below shows how to configure a canary deployment in Apache APISIX.</p><figure class=align-center><a href=/images/gateway-and-mesh/canary-api-gateway.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/canary-api-gateway.png#center alt="Canary deployments with an API gateway"></a><figcaption>Canary deployments with an API gateway</figcaption></figure><p>You can send a request to the <a href="https://apisix.apache.org/docs/apisix/admin-api/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>APISIX Admin API</a> with the following configuration:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>curl http://127.0.0.1:9180/apisix/admin/routes/1 <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>-H <span style=color:#e6db74>&#39;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&#39;</span> -X PUT -d <span style=color:#e6db74>&#39;
</span><span style=color:#e6db74>{
</span><span style=color:#e6db74>  &#34;uri&#34;:&#34;/*&#34;,
</span><span style=color:#e6db74>  &#34;plugins&#34;:{
</span><span style=color:#e6db74>    &#34;traffic-split&#34;:{
</span><span style=color:#e6db74>      &#34;rules&#34;:[
</span><span style=color:#e6db74>        {
</span><span style=color:#e6db74>          &#34;weighted_upstreams&#34;:[
</span><span style=color:#e6db74>            {
</span><span style=color:#e6db74>              &#34;upstream&#34;:{
</span><span style=color:#e6db74>                &#34;name&#34;:&#34;api-v1&#34;,
</span><span style=color:#e6db74>                &#34;type&#34;:&#34;roundrobin&#34;,
</span><span style=color:#e6db74>                &#34;nodes&#34;:{
</span><span style=color:#e6db74>                  &#34;api-v1:8080&#34;:1
</span><span style=color:#e6db74>                }
</span><span style=color:#e6db74>              },
</span><span style=color:#e6db74>              &#34;weight&#34;:95
</span><span style=color:#e6db74>            },
</span><span style=color:#e6db74>            {
</span><span style=color:#e6db74>              &#34;weight&#34;:5
</span><span style=color:#e6db74>            }
</span><span style=color:#e6db74>          ]
</span><span style=color:#e6db74>        }
</span><span style=color:#e6db74>      ]
</span><span style=color:#e6db74>    }
</span><span style=color:#e6db74>  },
</span><span style=color:#e6db74>  &#34;upstream&#34;:{
</span><span style=color:#e6db74>    &#34;type&#34;:&#34;roundrobin&#34;,
</span><span style=color:#e6db74>    &#34;nodes&#34;:{
</span><span style=color:#e6db74>      &#34;api-v2:8080&#34;:1
</span><span style=color:#e6db74>    }
</span><span style=color:#e6db74>  }
</span><span style=color:#e6db74>}&#39;</span>
</code></pre></div><p>APISIX will now route 95% of the traffic to the api-v1 service and 5% to the api-v2 service.</p><h2 id=kubernetes-gateways>Kubernetes Gateways<a hidden class=anchor aria-hidden=true href=#kubernetes-gateways>#</a></h2><p>Kubernetes gateways are just Kubernetes-native API gateways. i.e., you can manage these API gateways with the Kubernetes API, similar to a Kubernetes pod, service, or deployment.</p><p>In Kubernetes, your APIs are pods and services deployed in a cluster. You then use a Kubernetes gateway to direct external traffic to your cluster.</p><p>Kubernetes provides two APIs to achieve this, the <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Ingress API</a> and the <a href="https://gateway-api.sigs.k8s.io/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Gateway API</a>.</p><figure class=align-center><a href=/images/gateway-and-mesh/kubernetes-gateway.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/kubernetes-gateway.png#center alt="Kubernetes gateway"></a><figcaption>Kubernetes gateway</figcaption></figure><h3 id=kubernetes-ingress-api>Kubernetes Ingress API<a hidden class=anchor aria-hidden=true href=#kubernetes-ingress-api>#</a></h3><p>The Ingress API was created to overcome the limitations of the default service types, <a href="https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>NodePort</a> and <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>LoadBalancer</a>, by introducing features like routing and SSL termination. It also standardized how you expose Kubernetes services to external traffic.</p><p>It has two components, the <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/#the-ingress-resource?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Ingress</a> and the <a href="https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Ingress controller</a>.</p><p>The Ingress Kubernetes native object defines a set of rules on how external traffic can access your services.</p><p>This example configuration shows routing traffic based on URI path with the Kubernetes Ingress object:</p><div class=highlight title=route-traffic.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Ingress</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-routes</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>ingressClassName</span>: <span style=color:#ae81ff>apisix</span>
  <span style=color:#f92672>rules</span>:
    - <span style=color:#f92672>http</span>:
        <span style=color:#f92672>paths</span>:
          - <span style=color:#f92672>backend</span>:
              <span style=color:#f92672>service</span>:
                <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-v1</span>
                <span style=color:#f92672>port</span>:
                  <span style=color:#f92672>number</span>: <span style=color:#ae81ff>8080</span>
            <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/v1</span>
            <span style=color:#f92672>pathType</span>: <span style=color:#ae81ff>Exact</span>
          - <span style=color:#f92672>backend</span>:
              <span style=color:#f92672>service</span>:
                <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-v2</span>
                <span style=color:#f92672>port</span>:
                  <span style=color:#f92672>number</span>: <span style=color:#ae81ff>8080</span>
            <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/v2</span>
            <span style=color:#f92672>pathType</span>: <span style=color:#ae81ff>Exact</span>
</code></pre></div><p>An Ingress controller implements these rules and routes traffic to your cluster using a reverse proxy.</p><p>There are over <a href="https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/#additional-controllers?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>20 Ingress controller implementations</a>. APISIX has an <a href="https://apisix.apache.org/docs/ingress-controller/next/getting-started/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Ingress controller</a> that wraps around APISIX API gateway to work as Kubernetes Ingress.</p><figure class=align-center><a href=/images/gateway-and-mesh/apisix-ingress.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/apisix-ingress.png#center alt="APISIX Ingress"></a><figcaption>APISIX Ingress</figcaption></figure><p>The APISIX Ingress controller converts the Kubernetes Ingress object to APISIX configuration.</p><figure class=align-center><a href=/images/gateway-and-mesh/translate.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/translate.png#center alt="APISIX Ingress controller translates configuration"></a><figcaption>APISIX Ingress controller translates configuration</figcaption></figure><p>APISIX then implements this configuration.</p><figure class=align-center><a href=/images/gateway-and-mesh/route-ingress.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/route-ingress.png#center alt="Canary deployments with Kubernetes Ingress API"></a><figcaption>Canary deployments with Kubernetes Ingress API</figcaption></figure><p>You can swap APISIX with any other Ingress controller, as the Ingress API is not tied to any specific implementation.</p><p>This vendor neutrality works well for simple configurations. But if you want to do complex routing like a canary deployment, you must rely on vendor-specific annotations.</p><p>The example below shows how to configure a canary deployment using <a href="https://docs.nginx.com/nginx-ingress-controller/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Nginx Ingress</a>. The <a href="https://github.com/kubernetes/ingress-nginx/blob/main/docs/user-guide/nginx-configuration/annotations.md#canary?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>custom annotations</a> used here are specific to Nginx:</p><div class=highlight title=canary-ingress.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Ingress</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>annotations</span>:
    <span style=color:#f92672>nginx.ingress.kubernetes.io/canary</span>: <span style=color:#e6db74>&#34;true&#34;</span>
    <span style=color:#f92672>nginx.ingress.kubernetes.io/canary-weight</span>: <span style=color:#e6db74>&#34;5&#34;</span>
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-canary</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>rules</span>:
  - <span style=color:#f92672>http</span>:
      <span style=color:#f92672>paths</span>:
      - <span style=color:#f92672>backend</span>:
          <span style=color:#f92672>serviceName</span>: <span style=color:#ae81ff>api-v2</span>
          <span style=color:#f92672>servicePort</span>: <span style=color:#ae81ff>8080</span>
        <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/</span>
</code></pre></div><p>The above configuration will route 5% of the traffic to the api-v2 service.</p><p>In addition to annotations, Ingress controllers like APISIX have custom Kubernetes CRDs to overcome the limitations of the Ingress API.</p><p>The example below uses the APISIX CRD, <a href="https://apisix.apache.org/docs/ingress-controller/concepts/apisix_route/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>ApisixRoute</a> to configure a canary deployment:</p><div class=highlight title=canary-crds.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apisix.apache.org/v2</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ApisixRoute</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-canary</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>http</span>:
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>route</span>
      <span style=color:#f92672>match</span>:
        <span style=color:#f92672>paths</span>:
          - <span style=color:#ae81ff>/*</span>
      <span style=color:#f92672>backends</span>:
        - <span style=color:#f92672>serviceName</span>: <span style=color:#ae81ff>api-v1</span>
          <span style=color:#f92672>servicePort</span>: <span style=color:#ae81ff>8080</span>
          <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>95</span>
        - <span style=color:#f92672>serviceName</span>: <span style=color:#ae81ff>api-v2</span>
          <span style=color:#f92672>servicePort</span>: <span style=color:#ae81ff>8080</span>
          <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>5</span>
</code></pre></div><p>These custom CRDs made it much easier to configure Ingress and leverage the full capabilities of the API gateway underneath but at the expense of portability.</p><h3 id=kubernetes-gateway-api>Kubernetes Gateway API<a hidden class=anchor aria-hidden=true href=#kubernetes-gateway-api>#</a></h3><p>The Gateway API is a new Kubernetes object that aims to &ldquo;fix&rdquo; the Ingress API.</p><p>It takes inspiration from the custom CRDs developed by Ingress controllers to add HTTP header-based matching, weighted traffic splitting, and <a href="https://gateway-api.sigs.k8s.io/#gateway-api-concepts?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>other features</a> that require custom proprietary annotations with the Ingress API.</p><p>The example below shows configuring a canary deployment with the Kubernetes Gateway API:</p><div class=highlight title=canary-gateway.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>gateway.networking.k8s.io/v1alpha2</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>HTTPRoute</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-canary</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>rules</span>:
  - <span style=color:#f92672>backendRefs</span>:
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-v1</span>
      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8080</span>
      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>95</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-v2</span>
      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8080</span>
      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>5</span>
</code></pre></div><p>Any Ingress controller (that implements the Gateway API) can now implement this configuration.</p><p>The Gateway API also makes <a href=/posts/gateway-vs-ingress-api/>many improvements</a> over the Ingress API, but it is still in alpha, and the Gateway API implementations are constantly breaking.</p><h2 id=service-meshes>Service Meshes<a hidden class=anchor aria-hidden=true href=#service-meshes>#</a></h2><p>API gateways and Kubernetes gateways work across application boundaries solving edge problems while abstracting your APIs.</p><p>Service Meshes solve a different challenge.</p><p>A service mesh is more concerned about inter-service communication (east-west traffic) than service-client communication (north-south traffic).</p><p>Typically, this is achieved by deploying sidecar proxies with APIs/services.</p><figure class=align-center><a href=/images/gateway-and-mesh/service-mesh.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/service-mesh.png#center alt="Service mesh"></a><figcaption>Service mesh</figcaption></figure><p>Here, the sidecar proxies handle the service-to-service communication instead of the developer having to code the networking logic to the services.</p><p>There are a lot of service meshes available. Some of the popular ones are:</p><ul><li><strong><a href="https://istio.io/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Istio</a></strong>: By far the most popular service mesh. It is built on top of <a href="https://www.envoyproxy.io/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Envoy proxy</a>, which many service meshes use.</li><li><strong><a href="https://linkerd.io/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Linkerd</a></strong>: A lightweight service mesh that uses linkerd2-proxy, written in Rust specifically for Linkerd.</li><li><strong><a href="https://developer.hashicorp.com/consul/docs/connect?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Consul Connect</a></strong>: A service mesh emphasizing security and observability. It can work with either a built-in proxy or Envoy.</li></ul><p>New service mesh offerings like <a href="https://isovalent.com/blog/post/introducing-cilium-mesh/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Cilium</a> offer alternatives to sidecar-based service meshes by using networking capabilities directly from the kernel through <a href="https://ebpf.io/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>eBPF</a>.</p><figure class=align-center><a href=/images/gateway-and-mesh/cilium-mesh.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/cilium-mesh.png#center alt="Sidecar-less service mesh"></a><figcaption>Sidecar-less service mesh<p>A typical service mesh requires 8 proxies for 8 services whereas eBPF-based service meshes like Cilium don&rsquo;t. Adapted from <a href=https://isovalent.com/blog/post/cilium-service->Cilium Service Mesh – Everything You Need to Know</a></p></figcaption></figure><p>Service meshes also have basic ingress/egress gateways to handle north-south traffic to and from the services. Ingress gateways are the entry points of external traffic to a service mesh, and egress gateways allow services inside a mesh to access external services.</p><figure class=align-center><a href=/images/gateway-and-mesh/ingress-egress-mesh.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/ingress-egress-mesh.png#center alt="Ingress and egress gateways with a service mesh"></a><figcaption>Ingress and egress gateways with a service mesh</figcaption></figure><p>Apache APISIX also has a service mesh implementation called <a href="https://github.com/api7/Amesh?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Amesh</a>. It works with Istio&rsquo;s control plane using the xDS protocol replacing the default Envoy proxy in the sidecar.</p><p>A service mesh lets you configure canary deployments. For example, you can split the requests from one service between two versions of another service.</p><figure class=align-center><a href=/images/gateway-and-mesh/canary-mesh.png target=_blank><img loading=lazy src=/images/gateway-and-mesh/canary-mesh.png#center alt="Canary deployments with a service mesh"></a><figcaption>Canary deployments with a service mesh</figcaption></figure><p>The example below shows configuring a <a href="https://istio.io/latest/docs/concepts/traffic-management/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>canary deployment with Istio service mesh</a>:</p><div class=highlight title=canary-mesh-vs.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.istio.io/v1alpha3</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>VirtualService</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-virtual-service</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>hosts</span>:
    - <span style=color:#ae81ff>api</span>
  <span style=color:#f92672>http</span>:
    - <span style=color:#f92672>route</span>:
        - <span style=color:#f92672>destination</span>:
            <span style=color:#f92672>host</span>: <span style=color:#ae81ff>api</span>
            <span style=color:#f92672>subset</span>: <span style=color:#ae81ff>v1</span>
          <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>80</span>
        - <span style=color:#f92672>destination</span>:
            <span style=color:#f92672>host</span>: <span style=color:#ae81ff>api</span>
            <span style=color:#f92672>subset</span>: <span style=color:#ae81ff>v2</span>
          <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>20</span>
</code></pre></div><div class=highlight title=canary-mesh-dr.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.istio.io/v1alpha3</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>DestinationRule</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-destination-rule</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>host</span>: <span style=color:#ae81ff>api</span>
  <span style=color:#f92672>subsets</span>:
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>v1</span>
      <span style=color:#f92672>labels</span>:
        <span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;1.0&#34;</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>v2</span>
      <span style=color:#f92672>labels</span>:
        <span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;2.0&#34;</span>
</code></pre></div><p>These configurations are specific to Istio. To switch to a different service mesh, you must create a different but similarly vendor-dependant configuration.</p><p>The <a href="https://smi-spec.io/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Service Mesh Interface</a> (SMI) specification was created to solve this portability issue.</p><p>The SMI <a href="https://github.com/servicemeshinterface/smi-spec?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>spec</a> is a set of Kubernetes CRDs that a service mesh user can use to define applications without binding to service mesh implementations.</p><p>A standardization attempt will only work if all the projects are on board. But this did not happen with the SMI spec, and <a href="https://layer5.io/service-mesh-landscape#smi?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>only a few projects participated actively</a>.</p><p>More recently, the <a href="https://github.com/kubernetes/community/tree/master/sig-network?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Kubernetes SIG Network</a> has been evolving the Gateway API to support service meshes.</p><p>The <a href="https://gateway-api.sigs.k8s.io/contributing/gamma/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>GAMMA (Gateway API for Mesh Management and Administration) initiative</a> is a dedicated group with the Gateway API project with goals to &ldquo;investigate, design, and track Gateway API resources, semantics, and other artifacts related to service mesh technology and use-cases.&rdquo;</p><p>Gateway API is a natural next step to the Ingress API, but we must wait to see how it will work for service meshes. Istio <a href="https://istio.io/latest/blog/2022/gateway-api-beta/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>has announced</a> its intention to use the Gateway API as its default API for all traffic management and continues to drive the project forward.</p><p>The example below shows <a href="https://istio.io/latest/docs/tasks/traffic-management/traffic-shifting/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>configuring a canary deployment in Istio with the Gateway API</a>. The underlying idea is using <a href="https://gateway-api.sigs.k8s.io/v1alpha2/references/spec/#gateway.networking.k8s.io%2fv1beta1.ParentReference?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>parentRefs</a> to attach to other services instead of the gateway:</p><div class=highlight title=canary-gateway-mesh.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>gateway.networking.k8s.io/v1beta1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>HTTPRoute</span>
<span style=color:#f92672>metadata</span>:
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-canary</span>
<span style=color:#f92672>spec</span>:
  <span style=color:#f92672>parentRefs</span>:
  - <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-a</span>
    <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8080</span>
  <span style=color:#f92672>rules</span>:
  - <span style=color:#f92672>backendRefs</span>:
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-b-v1</span>
      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8080</span>
      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>95</span>
    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>api-b-v2</span>
      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8080</span>
      <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>5</span>
</code></pre></div><p>There are <a href="https://thenewstack.io/the-gateway-api-is-in-the-firing-line-of-the-service-mesh-wars/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>some concerns</a> that the GAMMA project might become skewed to serve the needs of one particular project than the larger community, which will eventually lead to other projects using their own APIs, similar to the <a href=/posts/gateway-vs-ingress-api/#custom-crds--ingress-api>custom CRD scenario</a> after the Kubernetes Ingress API.</p><p>But the Gateway API project has been the best attempt at standardizing traffic management in service meshes. The <a href="https://smi-spec.io/blog/announcing-smi-gateway-api-gamma/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>SMI project also joined the GAMMA initiative</a> with a shared vision and will help advocate for consistent implementations of the Gateway API by service mesh projects.</p><p>Other projects like <a href="https://docs.flagger.app/tutorials/gatewayapi-progressive-delivery?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Flagger</a> and <a href="https://github.com/argoproj-labs/rollouts-plugin-trafficrouter-gatewayapi?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>Argo Rollouts</a> have also integrated with the Gateway API.</p><h2 id=what-should-you-use>What Should You Use?<a hidden class=anchor aria-hidden=true href=#what-should-you-use>#</a></h2><p>There is only one correct answer to this question; &ldquo;it depends.&rdquo;</p><p>If you are developing APIs and need authentication, security, routing, or metrics, you are better off using an API gateway than building this on your own in your APIs.</p><p>If you want to do something similar in a Kubernetes environment, you should use a Kubernetes gateway instead of trying to wrangle your API gateway to work on Kubernetes. Thankfully, a lot of API gateways also work with Kubernetes-native configurations.</p><p>But sometimes, the features offered by an API gateway + Ingress controller might be an overkill for a Kubernetes environment, and you might want to switch back to simple traffic management.</p><p>Service meshes, on the other hand, solve an entirely different set of problems. They also bring their own gateways to handle north-south traffic (usually enough) but also let you use your own gateways with more features.</p><p>The convergence of the API gateway and the service mesh through the Kubernetes Gateway API should make it easier for the application developer to focus on solving problems than worry about the underlying implementation.</p><p>Projects like Apache APISIX use the same technology to build the API gateway and service mesh offerings and integrate well with these specifications, incentivizing vendor-neutral choices.</p><p>It is also likely that you will not need any of these. You may <a href="https://blog.frankel.ch/chopping-monolith/?utm_source=navendu_blog&utm_medium=referral&utm_campaign=a-comprehensive-guide-to-api-gateways-kubernetes-gateways-and-service-meshes" target=_blank>not even need microservices</a> or a distributed architecture, but when you need them, gateways and meshes can make your lives a lot easier.</p><h2>Related Posts</h2><ul><li><a href=/posts/gateway-vs-ingress-api/>Comparing Kubernetes Gateway and Ingress APIs</a></li><li><a href=/posts/apisix-ingress-external/>Accessing External Services through APISIX Ingress</a></li><li><a href=/posts/tinier-apisix-plugin/>A "Tinier" APISIX Plugin</a></li></ul><section class=subscribe-content><hr><p>Thank you for reading <i>"A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes."</i></p><p>Subscribe via <a href=/subscribe>email</a> or
<a href=/index.xml target=_blank>RSS feed</a> to be the first to receive
my content.</p><p>If you liked this post, check out my <a href=/categories/featured>featured posts</a> or learn more <a href=/about>about me</a>.</p></section><section class=subscription-form><form action="https://navendu.us5.list-manage.com/subscribe/post-json?u=fb9ffeb3ee6bc8aaf1d5b8a98&id=5ff8367bc1&c=?" method=post autocomplete=off class=subscribe-form><div class=subscribe-input><input type=email name=EMAIL id=email required placeholder="Email Address ↵" title="Email Address"></div><input value=Subscribe type=submit class=subscribe-button title=Subscribe></form><section class=entry-content><div class=subscribe-message>Get a biweekly dose of tech news, curated content, and uninterrupted musings.</div></section></section><script>$(".subscribe-form").submit(function(d){var a,b,c;d.preventDefault(),a=$(this),b=a.attr("action"),c=a.attr("method"),$.ajax({type:c,url:b,data:a.serialize(),dataType:`jsonp`,success:function(b){b.result===`success`?(a.find(".subscribe-button").attr("value","Subscribed!"),$(".subscribe-message").html("Thank you for subscribing! Check your inbox and add me in your contacts to not miss an issue! <a target='_blank' href='https://twitter.com/intent/tweet?url=https%3A%2F%2Fnavendu.me&text=I%20just%20subscribed%20to%20@sudo_navendu%27s%20blog%21%20Check%20it%20out%21&hashtags=OpenSource%2CDevelopers%2CDEVCommunity'>Tweet about it</a>!"),$(".subscribe-form :input").prop("disabled",!0)):(a.find(".subscribe-button").attr("value","Failed to Subscribe! Click again to retry"),$(".subscribe-message").html("There was an error subscribing you to my blog. "+b.msg+"."),a[0].reset()),console.log(b)},error:function(b){console.log("An error occurred."),console.log(b),a[0].reset()}})})</script></div><footer class=post-footer><ul class=post-tags><li><a href=https://navendu.me/tags/api-gateway/>api gateway</a></li><li><a href=https://navendu.me/tags/service-mesh/>service-mesh</a></li><li><a href=https://navendu.me/tags/kubernetes/>kubernetes</a></li></ul><nav class=paginav><a class=prev href=https://navendu.me/posts/ai-and-apis/><span class=title>« Prev</span><br><span>AI and APIs</span></a>
<a class=next href=https://navendu.me/posts/vada-profitable/><span class=title>Next »</span><br><span>Vada (Fritters) Profitable</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on twitter" href="https://twitter.com/intent/tweet/?text=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes&url=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f&hashtags=apigateway%2cservicemesh%2ckubernetes"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f&title=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes&summary=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes&source=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f&title=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on whatsapp" href="https://api.whatsapp.com/send?text=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes%20-%20https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A Comprehensive Guide to API Gateways, Kubernetes Gateways, and Service Meshes on telegram" href="https://telegram.me/share/url?text=A%20Comprehensive%20Guide%20to%20API%20Gateways%2c%20Kubernetes%20Gateways%2c%20and%20Service%20Meshes&url=https%3a%2f%2fnavendu.me%2fposts%2fgateway-and-mesh%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>This work by <a href=https://navendu.me/about/#about-me>Navendu Pottekkat</a></span>
<span>is licensed under <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0 target=_blank>CC BY-SA 4.0</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerHTML='copy';function d(){a.innerHTML='copied!',setTimeout(()=>{a.innerHTML='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script><script>for(var els=document.getElementsByClassName("highlight"),i=0,title,code,newNode;i<els.length;i++)title=els[i].title,code=els[i].firstElementChild.firstElementChild,title.length&&(newNode=document.createElement("div"),newNode.textContent=title,newNode.classList.add("highlight-title"),code.parentNode.insertBefore(newNode,code))</script></body></html>