<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Managing APISIX Declaratively with ADC | Navendu Pottekkat</title><meta name=keywords content="apache apisix,api gateway,tutorials"><meta name=description content="A guide on using the new APISIX Declarative CLI to manage APISIX with declarative configuration files."><meta name=author content="Navendu Pottekkat"><link rel=canonical href=https://api7.ai/blog/managing-apisix-declaratively/><script defer data-domain=navendu.me src=/misc/js/script.js data-api=/misc/api/event></script><script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script><script></script><link crossorigin=anonymous href=/assets/css/stylesheet.66e3e513d75c2ff303648a5691fa6787b3c8f1dc4b3307618713a4dc494f0696.css integrity="sha256-ZuPlE9dcL/MDZIpWkfpnh7PI8dxLMwdhhxOk3ElPBpY=" rel="preload stylesheet" as=style><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://navendu.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://navendu.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://navendu.me/favicon-32x32.png><link rel=apple-touch-icon href=https://navendu.me/apple-touch-icon.png><link rel=mask-icon href=https://navendu.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Managing APISIX Declaratively with ADC"><meta property="og:description" content="A guide on using the new APISIX Declarative CLI to manage APISIX with declarative configuration files."><meta property="og:type" content="article"><meta property="og:url" content="https://navendu.me/posts/managing-apisix-declaratively/"><meta property="og:image" content="https://navendu.me/images/managing-apisix-declaratively/dna-banner.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-22T10:37:34+05:30"><meta property="article:modified_time" content="2023-09-22T08:27:49+05:30"><meta property="og:site_name" content="Navendu Pottekkat"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://navendu.me/images/managing-apisix-declaratively/dna-banner.jpg"><meta name=twitter:title content="Managing APISIX Declaratively with ADC"><meta name=twitter:description content="A guide on using the new APISIX Declarative CLI to manage APISIX with declarative configuration files."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://navendu.me/posts/"},{"@type":"ListItem","position":2,"name":"Managing APISIX Declaratively with ADC","item":"https://navendu.me/posts/managing-apisix-declaratively/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Managing APISIX Declaratively with ADC","name":"Managing APISIX Declaratively with ADC","description":"A guide on using the new APISIX Declarative CLI to manage APISIX with declarative configuration files.","keywords":["apache apisix","api gateway","tutorials"],"articleBody":"APISIX users primarily use the Admin API to configure APISIX. But as your configurations increase in complexity, managing these only through the Admin API becomes more challenging.\nTo make things easier, we developed APISIX Declarative CLI (ADC), a tool that lets you define APISIX configurations declaratively.\nIn this article, we will look at how you can manage your APISIX configurations with ADC.\nDeploying APISIX Before we get started, we should first run an APISIX instance to interact with and configure. We can spin up APISIX in Docker by running:\ncurl -sL https://run.api7.ai/apisix/quickstart | sh See the APISIX documentation to learn more about using APISIX.\nInstalling ADC You can install ADC with the go install command:\ngo install github.com/api7/adc@latest This will install the adc binary to your $GOPATH/bin directory.\n Note: Make sure you add this to your $PATH environment variable:\nexport PATH=$PATH:$GOPATH/bin  If you don’t have Go installed, you can also download the latest adc binary for your operating system and add it to your /bin folder as shown below:\nwget https://github.com/api7/adc/releases/download/v0.2.0/adc_0.2.0_linux_amd64.tar.gz tar -zxvf adc_0.2.0_linux_amd64.tar.gz mv adc /usr/local/bin/adc You can find binaries for other operating systems on the releases page. In the future, these binaries will be published on package managers like Homebrew.\nTo check if adc is installed, run:\nadc --help If everything is okay, you will see a list of available subcommands and how to use them.\nConfiguring ADC with Your APISIX Instance To configure ADC to work with your deployed APISIX instance, you can run:\nadc configure This will prompt you to pass in the APISIX server address (‘http://127.0.0.1:9180’ if you followed along) and token.\nIf everything is correct, you should see a message as shown below:\nADC configured successfully! Connected to APISIX successfully!  Tip: You can use the ping subcommand to check the connectivity with APISIX anytime:\nadc ping  Validating APISIX Configuration Files Let’s create a basic APISIX configuration with a route that forwards traffic to an upstream:\nname: \"Basic configuration\" version: \"1.0.0\" services: - name: httpbin-service hosts: - api7.ai upstream: name: httpbin nodes: - host: httpbin.org port: 80 weight: 1 routes: - name: httpbin-route service_id: httpbin-service uri: \"/anything\" methods: - GET Once ADC is connected to the running APISIX instance, we can use it to validate this configuration before we apply it by running:\nadc validate -f config.yaml If the configuration is valid, you should receive a similar response:\nRead configuration file successfully: config name: Basic configuration, version: 1.0.0, routes: 1, services: 1. Successfully validated configuration file! Syncing Configuration to APISIX Instance You can now use ADC to sync your valid configuration with the connected APISIX instance. To do this, run:\nadc sync -f config.yaml This will create a route and a service as we declared in our configuration file:\ncreating service: \"httpbin-service\" creating route: \"httpbin-route\" Summary: created 2, updated 0, deleted 0 To verify if the routes were created properly, let’s try sending a request:\ncurl localhost:9080/anything -H \"host:api7.ai\" If everything is correct, you will receive a response back from httpbin.org.\nComparing Local and Running Configuration Now let’s update our local configuration in config.yaml file by adding another route:\nname: \"Basic configuration\" version: \"1.0.0\" services: - name: httpbin-service hosts: - api7.ai upstream: name: httpbin nodes: - host: httpbin.org port: 80 weight: 1 routes: - name: httpbin-route-anything service_id: httpbin-service uri: \"/anything\" methods: - GET - name: httpbin-route-ip service_id: httpbin-service uri: \"/ip\" methods: - GET Before syncing this configuration with APISIX, ADC lets you check the differences between it and the existing APISIX configuration. You can do this by running:\nadc diff -f config.yaml You will be able to see the additions and deletions in the configuration and understand what changed before applying it.\nConverting OpenAPI Definitions to APISIX Configuration ADC also has basic support for working with OpenAPI definitions. ADC lets you convert definitions in OpenAPI format to APISIX configuration.\nFor example, if you have documented your API in OpenAPI format as shown below:\nopenapi: 3.0.0 info: title: httpbin API description: Routes for httpbin API version: 1.0.0 servers: - url: http://httpbin.org paths: /anything: get: tags: - default summary: Returns anything that is passed in the request data operationId: getAnything parameters: - name: host in: header schema: type: string example: \"{{host}}\" responses: \"200\": description: Successfully return anything content: application/json: {} /ip: get: tags: - default summary: Returns the IP address of the requester operationId: getIP responses: \"200\": description: Successfully return IP content: application/json: {} You can use the subcommand openapi2apisix to convert this to APISIX configuration as shown below:\nadc openapi2apisix -o config.yaml -f openAPI.yaml This will create a configuration file like this:\nname: \"\" routes: - desc: Returns anything that is passed in the request data id: \"\" methods: - GET name: getAnything uris: - /anything - desc: Returns the IP address of the requester id: \"\" methods: - GET name: getIP uris: - /ip services: - desc: Routes for httpbin API id: \"\" name: httpbin API upstream: id: \"\" name: \"\" nodes: null version: \"\" As you can see, the configuration is incomplete, and you would still need to add a lot of configurations manually. We are improving ADC to bridge this gap between OpenAPI definitions and what can be directly mapped to APISIX configuration.\nTip: Use Autocomplete You can do a lot with ADC, and the list of features is bound to increase. To learn how to use any subcommand, you can use the --help or the -h flag, which will show the documentation for the subcommand.\nTo make things even easier, you can generate an autocompletion script for your shell environment using the completion subcommand. For example, if you are using a zsh shell, you can run:\nadc completion zsh You can then copy-paste the output to your .zshrc file, and it will start showing hints when you use adc.\nADC is still in its infancy and is being continuously improved. To learn more about the project, report bugs, or suggest features, visit github.com/api7/adc.\n","wordCount":"981","inLanguage":"en","image":"https://navendu.me/images/managing-apisix-declaratively/dna-banner.jpg","datePublished":"2023-09-22T10:37:34+05:30","dateModified":"2023-09-22T08:27:49+05:30","author":{"@type":"Person","name":"Navendu Pottekkat"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://navendu.me/posts/managing-apisix-declaratively/"},"publisher":{"@type":"Person","name":"Navendu Pottekkat","logo":{"@type":"ImageObject","url":"https://navendu.me/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://navendu.me/ accesskey=h title="Navendu Pottekkat (Alt + H)">Navendu Pottekkat</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://navendu.me/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://navendu.me/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://navendu.me/dailies/ title="Daily Logs"><span>Daily Logs</span></a></li><li><a href=https://navendu.me/about/ title=About><span>About</span></a></li><li><a href=https://navendu.me/subscribe/ title=Subscribe><span>Subscribe</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://navendu.me/>Home</a>&nbsp;»&nbsp;<a href=https://navendu.me/posts/>Posts</a></div><h1 class=post-title>Managing APISIX Declaratively with ADC</h1><div class=post-meta><span title="2023-09-22 10:37:34 +0530 +0530">September 22, 2023</span>&nbsp;·&nbsp;5 min&nbsp;|&nbsp;<a href=https://github.com/pottekkat/personal-website/blob/hugo/content/posts/managing-apisix-declaratively.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
&nbsp;|&nbsp;<span>Originally published at&nbsp;<a href=https://api7.ai/blog/managing-apisix-declaratively/ title=https://api7.ai/blog/managing-apisix-declaratively/ target=_blank rel="noopener noreferrer">api7.ai</a></span></div></header><figure class=entry-cover><img loading=lazy src=https://navendu.me/images/managing-apisix-declaratively/dna-banner.jpg alt="An image of a DNA strand."><p>A guide on using the new APISIX Declarative CLI to manage APISIX with declarative configuration files.</p></figure><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on twitter" href="https://twitter.com/intent/tweet/?text=Managing%20APISIX%20Declaratively%20with%20ADC&url=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f&hashtags=apacheapisix%2capigateway%2ctutorials"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f&title=Managing%20APISIX%20Declaratively%20with%20ADC&summary=Managing%20APISIX%20Declaratively%20with%20ADC&source=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f&title=Managing%20APISIX%20Declaratively%20with%20ADC"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on whatsapp" href="https://api.whatsapp.com/send?text=Managing%20APISIX%20Declaratively%20with%20ADC%20-%20https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on telegram" href="https://telegram.me/share/url?text=Managing%20APISIX%20Declaratively%20with%20ADC&url=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#deploying-apisix aria-label="Deploying APISIX">Deploying APISIX</a></li><li><a href=#installing-adc aria-label="Installing ADC">Installing ADC</a></li><li><a href=#configuring-adc-with-your-apisix-instance aria-label="Configuring ADC with Your APISIX Instance">Configuring ADC with Your APISIX Instance</a></li><li><a href=#validating-apisix-configuration-files aria-label="Validating APISIX Configuration Files">Validating APISIX Configuration Files</a></li><li><a href=#syncing-configuration-to-apisix-instance aria-label="Syncing Configuration to APISIX Instance">Syncing Configuration to APISIX Instance</a></li><li><a href=#comparing-local-and-running-configuration aria-label="Comparing Local and Running Configuration">Comparing Local and Running Configuration</a></li><li><a href=#converting-openapi-definitions-to-apisix-configuration aria-label="Converting OpenAPI Definitions to APISIX Configuration">Converting OpenAPI Definitions to APISIX Configuration</a></li><li><a href=#tip-use-autocomplete aria-label="Tip: Use Autocomplete">Tip: Use Autocomplete</a></li></ul></div></details></div><div class=post-content><p><a href="https://docs.api7.ai/apisix/documentation?utm_source=navendu_blog&utm_medium=referral&utm_campaign=managing-apisix-declaratively-with-adc" target=_blank>APISIX</a> users primarily use the Admin API to configure APISIX. But as your configurations increase in complexity, managing these only through the Admin API becomes more challenging.</p><p>To make things easier, we developed <a href="https://github.com/api7/adc?utm_source=navendu_blog&utm_medium=referral&utm_campaign=managing-apisix-declaratively-with-adc" target=_blank>APISIX Declarative CLI (ADC)</a>, a tool that lets you define APISIX configurations declaratively.</p><p>In this article, we will look at how you can manage your APISIX configurations with ADC.</p><h2 id=deploying-apisix>Deploying APISIX<a hidden class=anchor aria-hidden=true href=#deploying-apisix>#</a></h2><p>Before we get started, we should first run an APISIX instance to interact with and configure. We can spin up APISIX in Docker by running:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>curl -sL https://run.api7.ai/apisix/quickstart | sh
</code></pre></div><p>See the <a href="https://docs.api7.ai/apisix/getting-started?utm_source=navendu_blog&utm_medium=referral&utm_campaign=managing-apisix-declaratively-with-adc" target=_blank>APISIX documentation</a> to learn more about using APISIX.</p><h2 id=installing-adc>Installing ADC<a hidden class=anchor aria-hidden=true href=#installing-adc>#</a></h2><p>You can install ADC with the <code>go install</code> command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>go install github.com/api7/adc@latest
</code></pre></div><p>This will install the <code>adc</code> binary to your <code>$GOPATH/bin</code> directory.</p><blockquote><p><strong>Note</strong>: Make sure you add this to your <code>$PATH</code> environment variable:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>export PATH<span style=color:#f92672>=</span>$PATH:$GOPATH/bin
</code></pre></div></blockquote><p>If you don&rsquo;t have Go installed, you can also download the latest <code>adc</code> binary for your operating system and add it to your <code>/bin</code> folder as shown below:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>wget https://github.com/api7/adc/releases/download/v0.2.0/adc_0.2.0_linux_amd64.tar.gz
tar -zxvf adc_0.2.0_linux_amd64.tar.gz
mv adc /usr/local/bin/adc
</code></pre></div><p>You can find binaries for other operating systems on the <a href="https://github.com/api7/adc/releases/tag/v0.2.0?utm_source=navendu_blog&utm_medium=referral&utm_campaign=managing-apisix-declaratively-with-adc" target=_blank>releases page</a>. In the future, these binaries will be published on package managers like Homebrew.</p><p>To check if <code>adc</code> is installed, run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>adc --help
</code></pre></div><p>If everything is okay, you will see a list of available subcommands and how to use them.</p><h2 id=configuring-adc-with-your-apisix-instance>Configuring ADC with Your APISIX Instance<a hidden class=anchor aria-hidden=true href=#configuring-adc-with-your-apisix-instance>#</a></h2><p>To configure ADC to work with your deployed APISIX instance, you can run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>adc configure
</code></pre></div><p>This will prompt you to pass in the APISIX server address (&lsquo;http://127.0.0.1:9180&rsquo; if you followed along) and token.</p><p>If everything is correct, you should see a message as shown below:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>ADC configured successfully!
Connected to APISIX successfully!
</code></pre></div><blockquote><p><strong>Tip</strong>: You can use the <code>ping</code> subcommand to check the connectivity with APISIX anytime:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>adc ping
</code></pre></div></blockquote><h2 id=validating-apisix-configuration-files>Validating APISIX Configuration Files<a hidden class=anchor aria-hidden=true href=#validating-apisix-configuration-files>#</a></h2><p>Let&rsquo;s create a basic APISIX configuration with a route that forwards traffic to an upstream:</p><div class=highlight title=config.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;Basic configuration&#34;</span>
<span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;1.0.0&#34;</span>
<span style=color:#f92672>services</span>:
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>httpbin-service</span>
    <span style=color:#f92672>hosts</span>:
      - <span style=color:#ae81ff>api7.ai</span>
    <span style=color:#f92672>upstream</span>:
      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>httpbin</span>
      <span style=color:#f92672>nodes</span>:
        - <span style=color:#f92672>host</span>: <span style=color:#ae81ff>httpbin.org</span>
          <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
          <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>1</span>
<span style=color:#f92672>routes</span>:
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>httpbin-route</span>
    <span style=color:#f92672>service_id</span>: <span style=color:#ae81ff>httpbin-service</span>
    <span style=color:#f92672>uri</span>: <span style=color:#e6db74>&#34;/anything&#34;</span>
    <span style=color:#f92672>methods</span>:
      - <span style=color:#ae81ff>GET</span>
</code></pre></div><p>Once ADC is connected to the running APISIX instance, we can use it to validate this configuration before we apply it by running:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>adc validate -f config.yaml
</code></pre></div><p>If the configuration is valid, you should receive a similar response:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Read configuration file successfully: config name: Basic configuration, version: 1.0.0, routes: 1, services: 1.
Successfully validated configuration file!
</code></pre></div><h2 id=syncing-configuration-to-apisix-instance>Syncing Configuration to APISIX Instance<a hidden class=anchor aria-hidden=true href=#syncing-configuration-to-apisix-instance>#</a></h2><p>You can now use ADC to sync your valid configuration with the connected APISIX instance. To do this, run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>adc sync -f config.yaml
</code></pre></div><p>This will create a route and a service as we declared in our configuration file:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>creating service: <span style=color:#e6db74>&#34;httpbin-service&#34;</span>
creating route: <span style=color:#e6db74>&#34;httpbin-route&#34;</span>
Summary: created 2, updated 0, deleted <span style=color:#ae81ff>0</span>
</code></pre></div><p>To verify if the routes were created properly, let&rsquo;s try sending a request:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>curl localhost:9080/anything -H <span style=color:#e6db74>&#34;host:api7.ai&#34;</span>
</code></pre></div><p>If everything is correct, you will receive a response back from <a href="https://httpbin.org?utm_source=navendu_blog&utm_medium=referral&utm_campaign=managing-apisix-declaratively-with-adc" target=_blank>httpbin.org</a>.</p><h2 id=comparing-local-and-running-configuration>Comparing Local and Running Configuration<a hidden class=anchor aria-hidden=true href=#comparing-local-and-running-configuration>#</a></h2><p>Now let&rsquo;s update our local configuration in <code>config.yaml</code> file by adding another route:</p><div class=highlight title=config.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;Basic configuration&#34;</span>
<span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;1.0.0&#34;</span>
<span style=color:#f92672>services</span>:
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>httpbin-service</span>
    <span style=color:#f92672>hosts</span>:
      - <span style=color:#ae81ff>api7.ai</span>
    <span style=color:#f92672>upstream</span>:
      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>httpbin</span>
      <span style=color:#f92672>nodes</span>:
        - <span style=color:#f92672>host</span>: <span style=color:#ae81ff>httpbin.org</span>
          <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
          <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>1</span>
<span style=color:#f92672>routes</span>:
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>httpbin-route-anything</span>
    <span style=color:#f92672>service_id</span>: <span style=color:#ae81ff>httpbin-service</span>
    <span style=color:#f92672>uri</span>: <span style=color:#e6db74>&#34;/anything&#34;</span>
    <span style=color:#f92672>methods</span>:
      - <span style=color:#ae81ff>GET</span>
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>httpbin-route-ip</span>
    <span style=color:#f92672>service_id</span>: <span style=color:#ae81ff>httpbin-service</span>
    <span style=color:#f92672>uri</span>: <span style=color:#e6db74>&#34;/ip&#34;</span>
    <span style=color:#f92672>methods</span>:
      - <span style=color:#ae81ff>GET</span>
</code></pre></div><p>Before syncing this configuration with APISIX, ADC lets you check the differences between it and the existing APISIX configuration. You can do this by running:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>adc diff -f config.yaml
</code></pre></div><p>You will be able to see the additions and deletions in the configuration and understand what changed before applying it.</p><h2 id=converting-openapi-definitions-to-apisix-configuration>Converting OpenAPI Definitions to APISIX Configuration<a hidden class=anchor aria-hidden=true href=#converting-openapi-definitions-to-apisix-configuration>#</a></h2><p>ADC also has basic support for working with OpenAPI definitions. ADC lets you convert definitions in <a href="https://spec.openapis.org/oas/v3.0.0?utm_source=navendu_blog&utm_medium=referral&utm_campaign=managing-apisix-declaratively-with-adc" target=_blank>OpenAPI format</a> to APISIX configuration.</p><p>For example, if you have documented your API in OpenAPI format as shown below:</p><div class=highlight title=openAPI.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>openapi</span>: <span style=color:#ae81ff>3.0.0</span>
<span style=color:#f92672>info</span>:
  <span style=color:#f92672>title</span>: <span style=color:#ae81ff>httpbin API</span>
  <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Routes for httpbin API</span>
  <span style=color:#f92672>version</span>: <span style=color:#ae81ff>1.0.0</span>
<span style=color:#f92672>servers</span>:
  - <span style=color:#f92672>url</span>: <span style=color:#ae81ff>http://httpbin.org</span>
<span style=color:#f92672>paths</span>:
  <span style=color:#f92672>/anything</span>:
    <span style=color:#f92672>get</span>:
      <span style=color:#f92672>tags</span>:
        - <span style=color:#ae81ff>default</span>
      <span style=color:#f92672>summary</span>: <span style=color:#ae81ff>Returns anything that is passed in the request data</span>
      <span style=color:#f92672>operationId</span>: <span style=color:#ae81ff>getAnything</span>
      <span style=color:#f92672>parameters</span>:
        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>host</span>
          <span style=color:#f92672>in</span>: <span style=color:#ae81ff>header</span>
          <span style=color:#f92672>schema</span>:
            <span style=color:#f92672>type</span>: <span style=color:#ae81ff>string</span>
          <span style=color:#f92672>example</span>: <span style=color:#e6db74>&#34;{{host}}&#34;</span>
      <span style=color:#f92672>responses</span>:
        <span style=color:#e6db74>&#34;200&#34;</span>:
          <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Successfully return anything</span>
          <span style=color:#f92672>content</span>:
            <span style=color:#f92672>application/json</span>: {}
  <span style=color:#f92672>/ip</span>:
    <span style=color:#f92672>get</span>:
      <span style=color:#f92672>tags</span>:
        - <span style=color:#ae81ff>default</span>
      <span style=color:#f92672>summary</span>: <span style=color:#ae81ff>Returns the IP address of the requester</span>
      <span style=color:#f92672>operationId</span>: <span style=color:#ae81ff>getIP</span>
      <span style=color:#f92672>responses</span>:
        <span style=color:#e6db74>&#34;200&#34;</span>:
          <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Successfully return IP</span>
          <span style=color:#f92672>content</span>:
            <span style=color:#f92672>application/json</span>: {}
</code></pre></div><p>You can use the subcommand <code>openapi2apisix</code> to convert this to APISIX configuration as shown below:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>adc openapi2apisix -o config.yaml -f openAPI.yaml
</code></pre></div><p>This will create a configuration file like this:</p><div class=highlight title=config.yaml><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;&#34;</span>
<span style=color:#f92672>routes</span>:
- <span style=color:#f92672>desc</span>: <span style=color:#ae81ff>Returns anything that is passed in the request data</span>
  <span style=color:#f92672>id</span>: <span style=color:#e6db74>&#34;&#34;</span>
  <span style=color:#f92672>methods</span>:
  - <span style=color:#ae81ff>GET</span>
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>getAnything</span>
  <span style=color:#f92672>uris</span>:
  - <span style=color:#ae81ff>/anything</span>
- <span style=color:#f92672>desc</span>: <span style=color:#ae81ff>Returns the IP address of the requester</span>
  <span style=color:#f92672>id</span>: <span style=color:#e6db74>&#34;&#34;</span>
  <span style=color:#f92672>methods</span>:
  - <span style=color:#ae81ff>GET</span>
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>getIP</span>
  <span style=color:#f92672>uris</span>:
  - <span style=color:#ae81ff>/ip</span>
<span style=color:#f92672>services</span>:
- <span style=color:#f92672>desc</span>: <span style=color:#ae81ff>Routes for httpbin API</span>
  <span style=color:#f92672>id</span>: <span style=color:#e6db74>&#34;&#34;</span>
  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>httpbin API</span>
  <span style=color:#f92672>upstream</span>:
    <span style=color:#f92672>id</span>: <span style=color:#e6db74>&#34;&#34;</span>
    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;&#34;</span>
    <span style=color:#f92672>nodes</span>: <span style=color:#66d9ef>null</span>
<span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;&#34;</span>
</code></pre></div><p>As you can see, the configuration is incomplete, and you would still need to add a lot of configurations manually. We are improving ADC to bridge this gap between OpenAPI definitions and what can be directly mapped to APISIX configuration.</p><h2 id=tip-use-autocomplete>Tip: Use Autocomplete<a hidden class=anchor aria-hidden=true href=#tip-use-autocomplete>#</a></h2><p>You can do a lot with ADC, and the list of features is bound to increase. To learn how to use any subcommand, you can use the <code>--help</code> or the <code>-h</code> flag, which will show the documentation for the subcommand.</p><p>To make things even easier, you can generate an autocompletion script for your shell environment using the <code>completion</code> subcommand. For example, if you are using a zsh shell, you can run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>adc completion zsh
</code></pre></div><p>You can then copy-paste the output to your <code>.zshrc</code> file, and it will start showing hints when you use <code>adc</code>.</p><p>ADC is still in its infancy and is being continuously improved. To learn more about the project, report bugs, or suggest features, visit <a href="https://github.com/api7/adc?utm_source=navendu_blog&utm_medium=referral&utm_campaign=managing-apisix-declaratively-with-adc" target=_blank>github.com/api7/adc</a>.</p><h2>Related Posts</h2><ul><li><a href=/posts/tinier-apisix-plugin/>A "Tinier" APISIX Plugin</a></li><li><a href=/posts/rate-limit/>Rate Limit Your APIs With Apache APISIX</a></li><li><a href=/posts/request-validation/>Your API Requests Should Be Validated</a></li></ul><section class=subscribe-content><hr><p>Thank you for reading <i>"Managing APISIX Declaratively with ADC."</i></p><p>Subscribe via <a href=/subscribe>email</a> or
<a href=/index.xml target=_blank>RSS feed</a> to be the first to receive
my content.</p><p>If you liked this post, check out my <a href=/categories/featured>featured posts</a> or learn more <a href=/about>about me</a>.</p></section><section class=subscription-form><form action="https://navendu.us5.list-manage.com/subscribe/post-json?u=fb9ffeb3ee6bc8aaf1d5b8a98&id=5ff8367bc1&c=?" method=post autocomplete=off class=subscribe-form><div class=subscribe-input><input type=email name=EMAIL id=email required placeholder="Email Address ↵" title="Email Address"></div><input value=Subscribe type=submit class=subscribe-button title=Subscribe></form><section class=entry-content><div class=subscribe-message>Get a biweekly dose of tech news, curated content, and uninterrupted musings.</div></section></section><script>$(".subscribe-form").submit(function(d){var a,b,c;d.preventDefault(),a=$(this),b=a.attr("action"),c=a.attr("method"),$.ajax({type:c,url:b,data:a.serialize(),dataType:`jsonp`,success:function(b){b.result===`success`?(a.find(".subscribe-button").attr("value","Subscribed!"),$(".subscribe-message").html("Thank you for subscribing! Check your inbox and add me in your contacts to not miss an issue! <a target='_blank' href='https://twitter.com/intent/tweet?url=https%3A%2F%2Fnavendu.me&text=I%20just%20subscribed%20to%20@sudo_navendu%27s%20blog%21%20Check%20it%20out%21&hashtags=OpenSource%2CDevelopers%2CDEVCommunity'>Tweet about it</a>!"),$(".subscribe-form :input").prop("disabled",!0)):(a.find(".subscribe-button").attr("value","Failed to Subscribe! Click again to retry"),$(".subscribe-message").html("There was an error subscribing you to my blog. "+b.msg+"."),a[0].reset()),console.log(b)},error:function(b){console.log("An error occurred."),console.log(b),a[0].reset()}})})</script></div><footer class=post-footer><ul class=post-tags><li><a href=https://navendu.me/tags/apache-apisix/>apache apisix</a></li><li><a href=https://navendu.me/tags/api-gateway/>api gateway</a></li><li><a href=https://navendu.me/tags/tutorials/>tutorials</a></li></ul><nav class=paginav><a class=prev href=https://navendu.me/posts/shallow-wasm-waters/><span class=title>« Prev</span><br><span>Shallow WebAssembly Waters</span></a>
<a class=next href=https://navendu.me/posts/api-deployment-strategies/><span class=title>Next »</span><br><span>API Deployment Strategies</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on twitter" href="https://twitter.com/intent/tweet/?text=Managing%20APISIX%20Declaratively%20with%20ADC&url=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f&hashtags=apacheapisix%2capigateway%2ctutorials"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f&title=Managing%20APISIX%20Declaratively%20with%20ADC&summary=Managing%20APISIX%20Declaratively%20with%20ADC&source=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f&title=Managing%20APISIX%20Declaratively%20with%20ADC"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on whatsapp" href="https://api.whatsapp.com/send?text=Managing%20APISIX%20Declaratively%20with%20ADC%20-%20https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Managing APISIX Declaratively with ADC on telegram" href="https://telegram.me/share/url?text=Managing%20APISIX%20Declaratively%20with%20ADC&url=https%3a%2f%2fnavendu.me%2fposts%2fmanaging-apisix-declaratively%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>This work by <a href=https://navendu.me/about/#about-me>Navendu Pottekkat</a></span>
<span>is licensed under <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0 target=_blank>CC BY-SA 4.0</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerHTML='copy';function d(){a.innerHTML='copied!',setTimeout(()=>{a.innerHTML='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script><script>for(var els=document.getElementsByClassName("highlight"),i=0,title,code,newNode;i<els.length;i++)title=els[i].title,code=els[i].firstElementChild.firstElementChild,title.length&&(newNode=document.createElement("div"),newNode.textContent=title,newNode.classList.add("highlight-title"),code.parentNode.insertBefore(newNode,code))</script></body></html>