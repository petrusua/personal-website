<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>#187 Making My Life Easier | Navendu Pottekkat</title><meta name=keywords content="daily log"><meta name=description content="I created a CLI in Go to create new posts."><meta name=author content="Navendu Pottekkat"><link rel=canonical href=https://navendu.me/daily/18-8-22-making-my-life-easier/><script defer data-domain=navendu.me src=/misc/js/script.js data-api=/misc/api/event></script><script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script><script></script><link crossorigin=anonymous href=/assets/css/stylesheet.66e3e513d75c2ff303648a5691fa6787b3c8f1dc4b3307618713a4dc494f0696.css integrity="sha256-ZuPlE9dcL/MDZIpWkfpnh7PI8dxLMwdhhxOk3ElPBpY=" rel="preload stylesheet" as=style><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://navendu.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://navendu.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://navendu.me/favicon-32x32.png><link rel=apple-touch-icon href=https://navendu.me/apple-touch-icon.png><link rel=mask-icon href=https://navendu.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="#187 Making My Life Easier"><meta property="og:description" content="I created a CLI in Go to create new posts."><meta property="og:type" content="article"><meta property="og:url" content="https://navendu.me/daily/18-8-22-making-my-life-easier/"><meta property="og:image" content="https://navendu.me/images/preview.png"><meta property="article:section" content="daily"><meta property="article:published_time" content="2022-08-18T20:20:51+05:30"><meta property="article:modified_time" content="2023-08-06T18:43:25+05:30"><meta property="og:site_name" content="Navendu Pottekkat"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://navendu.me/images/preview.png"><meta name=twitter:title content="#187 Making My Life Easier"><meta name=twitter:description content="I created a CLI in Go to create new posts."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Dailies","item":"https://navendu.me/daily/"},{"@type":"ListItem","position":2,"name":"#187 Making My Life Easier","item":"https://navendu.me/daily/18-8-22-making-my-life-easier/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"#187 Making My Life Easier","name":"#187 Making My Life Easier","description":"I created a CLI in Go to create new posts.","keywords":["daily log"],"articleBody":"I created a CLI in Go to create new posts.\nTo clarify, it does not write posts for me. It just creates the correct file and folder with the correct name in the correct path.\nIt takes nearly 70 lines. I’m sure it could be made better. But it works for now. Stop when you are ahead and not make your life hard by trying to automate.\nHere is the code. Remember, it is built for my blog.\n// Run: go build -o ../  package main import ( \"errors\" \"flag\" \"fmt\" \"os\" \"os/exec\" \"path/filepath\" \"strings\" \"time\" ) var ( // available categories of content \t// 1st value is treated as default and 2nd value has special formatting for its file name \tcontentTypes = []string{\"posts\", \"daily\"} defaultTitle = \"New Blog Post\" // if this is being changed, change the logic for creating the file name below \tdateFormat = \"2-1-2006\" // folder where pages is stored \tcontentDir = \"content\" // folder where images are stored \t// this program creates a new folder with same file name as the page to store its images \timageDir = \"static/images/\" ) func main() { // use flags to get configuration \timageFolder := flag.Bool(\"imageFolder\", false, \"creates a folder to store images\") content := flag.String(\"content\", contentTypes[0], fmt.Sprintf(\"type of content [%v]\", strings.Join(contentTypes, \",\"))) title := flag.String(\"title\", defaultTitle, \"title of the post\") flag.Parse() var filename string // generate file name from title of the post \tfilename = strings.ReplaceAll(strings.ToLower(*title), \" \", \"-\") // prepend formatted date to file name for a type of post \tif *content == contentTypes[1] { currentTime := time.Now().Format(dateFormat) splitDate := strings.Split(currentTime, \"-\") splitDate[2] = splitDate[2][2:] currentDate := strings.Join(splitDate, \"-\") fmt.Printf(\"selected date: %s\\n\", currentDate) filename = currentDate + \"-\" + filename } arg := filepath.Join(*content, filename+\".md\") fmt.Printf(\"creating file: %s\\n\", filename) // create new file through hugo \tif _, err := os.Stat(filepath.Join(contentDir, arg)); errors.Is(err, os.ErrNotExist) { cmd := exec.Command(\"hugo\", \"new\", arg) err := cmd.Run() if err != nil { fmt.Printf(\"error running \\\"hugo new\\\": %s\\n\", err.Error()) } } else { fmt.Printf(\"error creating a new file: file \\\"%s\\\" already exists\\n\", arg) } // create image folder if needed (static/images/) \tif *imageFolder { if err := os.Mkdir(filepath.Join(imageDir, filename), 0755); err != nil { fmt.Printf(\"error creating folder: %s\\n\", err.Error()) } } } I will write a post soon about my blog setup.\n","wordCount":"379","inLanguage":"en","datePublished":"2022-08-18T20:20:51+05:30","dateModified":"2023-08-06T18:43:25+05:30","author":{"@type":"Person","name":"Navendu Pottekkat"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://navendu.me/daily/18-8-22-making-my-life-easier/"},"publisher":{"@type":"Person","name":"Navendu Pottekkat","logo":{"@type":"ImageObject","url":"https://navendu.me/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://navendu.me/ accesskey=h title="Navendu Pottekkat (Alt + H)">Navendu Pottekkat</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://navendu.me/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://navendu.me/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://navendu.me/dailies/ title="Daily Logs"><span>Daily Logs</span></a></li><li><a href=https://navendu.me/about/ title=About><span>About</span></a></li><li><a href=https://navendu.me/subscribe/ title=Subscribe><span>Subscribe</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://navendu.me/>Home</a>&nbsp;»&nbsp;<a href=https://navendu.me/daily/>Dailies</a></div><h1 class=post-title>#187 Making My Life Easier</h1><div class=post-meta><span title="2022-08-18 20:20:51 +0530 +0530">August 18, 2022</span>&nbsp;·&nbsp;2 min</div></header><div class=post-content><p>I created a CLI in Go to create new posts.</p><p>To clarify, it does not write posts for me. It just creates the correct file and folder with the correct name in the correct path.</p><p>It takes nearly 70 lines. I&rsquo;m sure it could be made better. But it works for now. Stop when you are ahead and not make your life hard by trying to automate.</p><p>Here is the code. Remember, it is built for <em>my</em> blog.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#75715e>// Run: go build -o ../
</span><span style=color:#75715e></span>
<span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;errors&#34;</span>
	<span style=color:#e6db74>&#34;flag&#34;</span>
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;os&#34;</span>
	<span style=color:#e6db74>&#34;os/exec&#34;</span>
	<span style=color:#e6db74>&#34;path/filepath&#34;</span>
	<span style=color:#e6db74>&#34;strings&#34;</span>
	<span style=color:#e6db74>&#34;time&#34;</span>
)

<span style=color:#66d9ef>var</span> (
	<span style=color:#75715e>// available categories of content
</span><span style=color:#75715e></span>	<span style=color:#75715e>// 1st value is treated as default and 2nd value has special formatting for its file name
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>contentTypes</span> = []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;posts&#34;</span>, <span style=color:#e6db74>&#34;daily&#34;</span>}

	<span style=color:#a6e22e>defaultTitle</span> = <span style=color:#e6db74>&#34;New Blog Post&#34;</span>

	<span style=color:#75715e>// if this is being changed, change the logic for creating the file name below
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>dateFormat</span> = <span style=color:#e6db74>&#34;2-1-2006&#34;</span>

	<span style=color:#75715e>// folder where pages is stored
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>contentDir</span> = <span style=color:#e6db74>&#34;content&#34;</span>

	<span style=color:#75715e>// folder where images are stored
</span><span style=color:#75715e></span>	<span style=color:#75715e>// this program creates a new folder with same file name as the page to store its images
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>imageDir</span> = <span style=color:#e6db74>&#34;static/images/&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#75715e>// use flags to get configuration
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>imageFolder</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Bool</span>(<span style=color:#e6db74>&#34;imageFolder&#34;</span>, <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>&#34;creates a folder to store images&#34;</span>)
	<span style=color:#a6e22e>content</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;content&#34;</span>, <span style=color:#a6e22e>contentTypes</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;type of content [%v]&#34;</span>, <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Join</span>(<span style=color:#a6e22e>contentTypes</span>, <span style=color:#e6db74>&#34;,&#34;</span>)))
	<span style=color:#a6e22e>title</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;title&#34;</span>, <span style=color:#a6e22e>defaultTitle</span>, <span style=color:#e6db74>&#34;title of the post&#34;</span>)

	<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Parse</span>()

	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>filename</span> <span style=color:#66d9ef>string</span>

	<span style=color:#75715e>// generate file name from title of the post
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>filename</span> = <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>ReplaceAll</span>(<span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>ToLower</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>title</span>), <span style=color:#e6db74>&#34; &#34;</span>, <span style=color:#e6db74>&#34;-&#34;</span>)

	<span style=color:#75715e>// prepend formatted date to file name for a type of post
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>content</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>contentTypes</span>[<span style=color:#ae81ff>1</span>] {
		<span style=color:#a6e22e>currentTime</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Format</span>(<span style=color:#a6e22e>dateFormat</span>)

		<span style=color:#a6e22e>splitDate</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>currentTime</span>, <span style=color:#e6db74>&#34;-&#34;</span>)
		<span style=color:#a6e22e>splitDate</span>[<span style=color:#ae81ff>2</span>] = <span style=color:#a6e22e>splitDate</span>[<span style=color:#ae81ff>2</span>][<span style=color:#ae81ff>2</span>:]

		<span style=color:#a6e22e>currentDate</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Join</span>(<span style=color:#a6e22e>splitDate</span>, <span style=color:#e6db74>&#34;-&#34;</span>)
		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;selected date: %s\n&#34;</span>, <span style=color:#a6e22e>currentDate</span>)

		<span style=color:#a6e22e>filename</span> = <span style=color:#a6e22e>currentDate</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;-&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>filename</span>
	}

	<span style=color:#a6e22e>arg</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>filepath</span>.<span style=color:#a6e22e>Join</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>content</span>, <span style=color:#a6e22e>filename</span><span style=color:#f92672>+</span><span style=color:#e6db74>&#34;.md&#34;</span>)

	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;creating file: %s\n&#34;</span>, <span style=color:#a6e22e>filename</span>)

	<span style=color:#75715e>// create new file through hugo
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stat</span>(<span style=color:#a6e22e>filepath</span>.<span style=color:#a6e22e>Join</span>(<span style=color:#a6e22e>contentDir</span>, <span style=color:#a6e22e>arg</span>)); <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>Is</span>(<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>ErrNotExist</span>) {
		<span style=color:#a6e22e>cmd</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>exec</span>.<span style=color:#a6e22e>Command</span>(<span style=color:#e6db74>&#34;hugo&#34;</span>, <span style=color:#e6db74>&#34;new&#34;</span>, <span style=color:#a6e22e>arg</span>)
		<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Run</span>()
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
			<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;error running \&#34;hugo new\&#34;: %s\n&#34;</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
		}
	} <span style=color:#66d9ef>else</span> {
		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;error creating a new file: file \&#34;%s\&#34; already exists\n&#34;</span>, <span style=color:#a6e22e>arg</span>)
	}

	<span style=color:#75715e>// create image folder if needed (static/images/&lt;name-of-the-file&gt;)
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>imageFolder</span> {
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Mkdir</span>(<span style=color:#a6e22e>filepath</span>.<span style=color:#a6e22e>Join</span>(<span style=color:#a6e22e>imageDir</span>, <span style=color:#a6e22e>filename</span>), <span style=color:#ae81ff>0755</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
			<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;error creating folder: %s\n&#34;</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
		}
	}
}
</code></pre></div><p>I will write a post soon about my blog setup.</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://navendu.me/daily/19-8-22-reliability/><span class=title>« Prev</span><br><span>#188 Reliability</span></a>
<a class=next href=https://navendu.me/daily/17-8-22-failed-attempts/><span class=title>Next »</span><br><span>#186 Failed Attempts</span></a></nav></footer></article></main><footer class=footer><span>This work by <a href=https://navendu.me/about/#about-me>Navendu Pottekkat</a></span>
<span>is licensed under <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0 target=_blank>CC BY-SA 4.0</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerHTML='copy';function d(){a.innerHTML='copied!',setTimeout(()=>{a.innerHTML='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script><script>for(var els=document.getElementsByClassName("highlight"),i=0,title,code,newNode;i<els.length;i++)title=els[i].title,code=els[i].firstElementChild.firstElementChild,title.length&&(newNode=document.createElement("div"),newNode.textContent=title,newNode.classList.add("highlight-title"),code.parentNode.insertBefore(newNode,code))</script></body></html>